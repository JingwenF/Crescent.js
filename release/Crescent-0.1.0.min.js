./release/*! Crescent - v0.1.0 - Realesed: 2015-04-22 */
!function(){"use strict";var a={version:"0.1.0"},b=function(a){var c=null,d=null,e={};return{_run:function(){c&&("function"==typeof c?c():c instanceof b&&c.run()),run(),d&&("function"==typeof d?d():d instanceof b&&d.run())},run:function(){},runBefore:function(a){return c=a,this},runAfter:function(a){return d=a,this},setParam:function(a,b){return e[a]=b,this},setRequest:function(a){a=a,e=a.params},onCreate:function(){},onResume:function(){},onDestory:function(){}}};a.controller=b;var c=function(){this.params={},this.url=null,this.source=null},d=function(){var a,d="hash",e=[],f={},g=null,h=null,i=function(d){if(d&&""!==d)for(var h=d.split("/"),i=0;i<e.length;i++)if(d.length==h.length){for(a=0;a<e[i].url.length;a++)if(e[i].url[a]!=h[a]){if(0!==e[i].url[a].indexOf(":"))break;var j=e[i].url[a].substr(1),k=h[a];if(f[j]){var l=f[j](k);k=l?l:k}m.params[j]=k}if(a==e[i].url.length){var m=new c;if(m.url=d,m.source=g,"function"==typeof e[i].midware)e[i].midware(m),g=e[i].midware;else{if("object"!=typeof e[i].midware)throw new Error("No middle ware handle such url:"+d);e[i].midware instanceof b?(e[i].setRequest(m),e[i].midware._run(),g=e[i].midware):e[i].midware.run&&(e[i].midware.run(m),g=e[i].midware)}}}};if(history.pushState&&"hash"!==d)h="history";else{h="hash";var j=function(){return window.location.href.split("#")[1]||""},k=function(a){window.location.hash=a},l=function(a){0===a.indexOf("!")&&i(a.substring(1))},m=j();if(m&&l(m),"onhashchange"in window)window.onhashchange=function(){l(j())};else{var n="",o=200,p=function(){var a=j();perviousURL!=a&&l(a),n=a};setTimeout(function(){p(),setTimeout(arguments.callee,o)},o)}}return{route:function(a,b){e.push({url:a.split("/"),midware:b})},param:function(a,b){f[a]=b},go:function(a){"hash"==h&&(a="#!"+a,k(a))},redirect:function(a){}}};a.router=new d,a.addEvent=function(a,b,c){a.attachEvent?(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c])):a.addEventListener(b,c,!1)},a.removeEvent=function(a,b,c){a.detachEvent?(a.detachEvent("on"+b,a[b+c]),a[b+c]=null):a.removeEventListener(b,c,!1)};a.bindHashChange=function(a){this.onhashChangeFuntions.push(a)},window.C=a}();